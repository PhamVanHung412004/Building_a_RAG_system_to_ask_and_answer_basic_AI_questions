```mermaid
graph TD;
  QOAa7eP51lXZ-EBC-60v-2["Documents"];
  QOAa7eP51lXZ-EBC-60v-4["Vector database"];
  QOAa7eP51lXZ-EBC-60v-8["Retriever"];
  QOAa7eP51lXZ-EBC-60v-10["Use query"];
  QOAa7eP51lXZ-EBC-60v-13["Geneator LLM"];
  QOAa7eP51lXZ-EBC-60v-14["Answers"];
  wQ-E3SvJu2npXZpC3sX7-2["Lấy data chuyển hóa thành file PDF"];
  wQ-E3SvJu2npXZpC3sX7-4["Lấy data trên web"];
  WluD8xZdfARcp4TGq59d-1["Chunking"];
  WluD8xZdfARcp4TGq59d-2["chunking 1"];
  WluD8xZdfARcp4TGq59d-3["chunking 2"];
  WluD8xZdfARcp4TGq59d-4["chunking 3"];
  WluD8xZdfARcp4TGq59d-5["......."];
  WluD8xZdfARcp4TGq59d-6["chunking n"];
  WluD8xZdfARcp4TGq59d-8["datas split"];
  WluD8xZdfARcp4TGq59d-14["Tách theo số dòng quy đinh. thêm số lượng token ngoài&nbsp; số lượng dòng đã quy định để tránh mất đi nội dung của 1 đoạn con đó.<div>Nhược điểm: Mặc dù đã thêm số lượng token nhưng việc mất đi những nội dung liền mạch của cả 1 đoạn xảy ra rất lớn</div>"];
  WluD8xZdfARcp4TGq59d-15["Làm sao để chunking tạo prompt 1 cách tối ưu?"];
  WluD8xZdfARcp4TGq59d-16["Ta tách 3 hoặc 5 dòng rồi đưa chúng về dạng vector.<div>Sau đó cứ 2 dòng 1 ta kiểm tra chúng thì có 2 cách để kiểm tra:</div>"];
  VgSq7yDDDXfhmLa7rlbG-3["Sử dụng keyword"];
  VgSq7yDDDXfhmLa7rlbG-2["Sử dụng vector"];
  WluD8xZdfARcp4TGq59d-26["Ta căn cứ vào keyword từ dòng đang xét đến keyword của dòng tiếp theo.<div>Tuy nhiên thì cách này không tối ưu vì khi keyword bị thay đổi nhưng nghĩa thì không thì lúc này cách này lại không còn tối ưu nữa</div>"];
  WluD8xZdfARcp4TGq59d-27["Ta chưa 2 dòng về thành dạng vector và căn cứ theo nghĩa và ngữ cảnh.<div>Nếu 2 dòng đang xét khớp nhau ta quy định 1 khoảng độ đo ví dụ độ đo của 2 dòng đó là 86% thì ta gộp chúng lại và cứ 2 dòng 1 lần query như thế thì ta sẽ chunking được tối ưu nhất.</div>"];
  VgSq7yDDDXfhmLa7rlbG-1["Sử dụng vector"];
  VgSq7yDDDXfhmLa7rlbG-6["Ta sử dụng ý tưởng 2 cho việc tối ưu chunking"];
  VgSq7yDDDXfhmLa7rlbG-7["Ý tưởng 1"];
  VgSq7yDDDXfhmLa7rlbG-8["Ý tưởng 2"];
  KdNgziEvX8SH9HenMc3--1["Embedding"];
  KdNgziEvX8SH9HenMc3--2["Vector database"];
  qzrY8-Rcd6X0LhOUmOE9-2["chunking 1"];
  qzrY8-Rcd6X0LhOUmOE9-3["chunking 2"];
  qzrY8-Rcd6X0LhOUmOE9-4["chunking 3"];
  qzrY8-Rcd6X0LhOUmOE9-5["......."];
  qzrY8-Rcd6X0LhOUmOE9-6["chunking n"];
  X1WspKh8iNMF5oSU8nsX-1["Retriver"];
  X1WspKh8iNMF5oSU8nsX-3["Vector Search"];
  QOAa7eP51lXZ-EBC-60v-2 --> QOAa7eP51lXZ-EBC-60v-4;
  QOAa7eP51lXZ-EBC-60v-10 --> QOAa7eP51lXZ-EBC-60v-13;
  QOAa7eP51lXZ-EBC-60v-13 --> QOAa7eP51lXZ-EBC-60v-14;
  wQ-E3SvJu2npXZpC3sX7-4 --> wQ-E3SvJu2npXZpC3sX7-2;
  WluD8xZdfARcp4TGq59d-8 --> WluD8xZdfARcp4TGq59d-1;
  WluD8xZdfARcp4TGq59d-15 --> WluD8xZdfARcp4TGq59d-14;
  WluD8xZdfARcp4TGq59d-15 --> WluD8xZdfARcp4TGq59d-16;
  WluD8xZdfARcp4TGq59d-16 --> WluD8xZdfARcp4TGq59d-26;
  WluD8xZdfARcp4TGq59d-16 --> WluD8xZdfARcp4TGq59d-27;
  VgSq7yDDDXfhmLa7rlbG-6 --> qzrY8-Rcd6X0LhOUmOE9-2;
  VgSq7yDDDXfhmLa7rlbG-6 --> qzrY8-Rcd6X0LhOUmOE9-3;
  VgSq7yDDDXfhmLa7rlbG-6 --> qzrY8-Rcd6X0LhOUmOE9-4;
  VgSq7yDDDXfhmLa7rlbG-6 --> qzrY8-Rcd6X0LhOUmOE9-5;
  VgSq7yDDDXfhmLa7rlbG-6 --> qzrY8-Rcd6X0LhOUmOE9-6;
  qzrY8-Rcd6X0LhOUmOE9-2 --> KdNgziEvX8SH9HenMc3--1;
  qzrY8-Rcd6X0LhOUmOE9-3 --> KdNgziEvX8SH9HenMc3--1;
  qzrY8-Rcd6X0LhOUmOE9-4 --> KdNgziEvX8SH9HenMc3--1;
  qzrY8-Rcd6X0LhOUmOE9-5 --> KdNgziEvX8SH9HenMc3--1;
  qzrY8-Rcd6X0LhOUmOE9-6 --> KdNgziEvX8SH9HenMc3--1;
  qzrY8-Rcd6X0LhOUmOE9-17 --> qzrY8-Rcd6X0LhOUmOE9-17;
  qzrY8-Rcd6X0LhOUmOE9-17 --> qzrY8-Rcd6X0LhOUmOE9-17;
  qzrY8-Rcd6X0LhOUmOE9-17 --> qzrY8-Rcd6X0LhOUmOE9-17;
  qzrY8-Rcd6X0LhOUmOE9-29 --> qzrY8-Rcd6X0LhOUmOE9-29;
  qzrY8-Rcd6X0LhOUmOE9-29 --> qzrY8-Rcd6X0LhOUmOE9-29;
  qzrY8-Rcd6X0LhOUmOE9-29 --> qzrY8-Rcd6X0LhOUmOE9-29;
  qzrY8-Rcd6X0LhOUmOE9-32 --> qzrY8-Rcd6X0LhOUmOE9-32;
  qzrY8-Rcd6X0LhOUmOE9-32 --> qzrY8-Rcd6X0LhOUmOE9-32;
  qzrY8-Rcd6X0LhOUmOE9-32 --> qzrY8-Rcd6X0LhOUmOE9-32;
  qzrY8-Rcd6X0LhOUmOE9-33 --> qzrY8-Rcd6X0LhOUmOE9-33;
  qzrY8-Rcd6X0LhOUmOE9-33 --> qzrY8-Rcd6X0LhOUmOE9-33;
  qzrY8-Rcd6X0LhOUmOE9-33 --> qzrY8-Rcd6X0LhOUmOE9-33;
  qzrY8-Rcd6X0LhOUmOE9-31 --> qzrY8-Rcd6X0LhOUmOE9-31;
  qzrY8-Rcd6X0LhOUmOE9-31 --> qzrY8-Rcd6X0LhOUmOE9-31;
  qzrY8-Rcd6X0LhOUmOE9-31 --> qzrY8-Rcd6X0LhOUmOE9-31;
  KdNgziEvX8SH9HenMc3--1 --> qzrY8-Rcd6X0LhOUmOE9-17;
  KdNgziEvX8SH9HenMc3--1 --> qzrY8-Rcd6X0LhOUmOE9-29;
  KdNgziEvX8SH9HenMc3--1 --> qzrY8-Rcd6X0LhOUmOE9-31;
  KdNgziEvX8SH9HenMc3--1 --> qzrY8-Rcd6X0LhOUmOE9-32;
  KdNgziEvX8SH9HenMc3--1 --> qzrY8-Rcd6X0LhOUmOE9-33;
  qzrY8-Rcd6X0LhOUmOE9-17 --> KdNgziEvX8SH9HenMc3--2;
  qzrY8-Rcd6X0LhOUmOE9-29 --> KdNgziEvX8SH9HenMc3--2;
  qzrY8-Rcd6X0LhOUmOE9-31 --> KdNgziEvX8SH9HenMc3--2;
  qzrY8-Rcd6X0LhOUmOE9-32 --> KdNgziEvX8SH9HenMc3--2;
  qzrY8-Rcd6X0LhOUmOE9-33 --> KdNgziEvX8SH9HenMc3--2;
  X1WspKh8iNMF5oSU8nsX-1 --> X1WspKh8iNMF5oSU8nsX-3;
```
